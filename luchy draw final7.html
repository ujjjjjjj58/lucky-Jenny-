<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 å°¾ç‰™æ¦®è€€ç››å…¸</title>
    <style>
        :root {
            --gold: #FFD700;
            --red: #b30000;
            --dark-red: #4a0000;
        }

        body {
            font-family: 'PingFang TC', 'Microsoft JhengHei', sans-serif;
            background: radial-gradient(circle at center, #3d0000 0%, #000 100%);
            color: #fff;
            height: 100vh;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow: hidden;
        }

        /* èƒŒæ™¯å‹•æ…‹è£é£¾ */
        body::before {
            content: "";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('https://www.transparenttextures.com/patterns/stardust.png');
            opacity: 0.3;
            pointer-events: none;
        }

        .header { margin-top: 40px; z-index: 10; }

        h1 {
            font-size: 3.5rem;
            color: var(--gold);
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5), 0 0 40px rgba(255, 215, 0, 0.3);
            letter-spacing: 8px;
            margin: 0;
        }

        .main-container {
            flex: 1;
            display: flex;
            width: 90%;
            max-width: 1400px;
            justify-content: space-around;
            align-items: center;
            z-index: 5;
        }

        .lottery-box {
            width: 600px;
            height: 450px;
            background: rgba(255, 255, 255, 0.05);
            border: 4px solid var(--gold);
            border-radius: 30px;
            box-shadow: inset 0 0 30px rgba(255, 215, 0, 0.2), 0 0 50px rgba(0,0,0,0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        #prize-label {
            position: absolute;
            top: -25px;
            background: linear-gradient(to right, #FFD700, #FFA500);
            color: #000;
            padding: 8px 40px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1.5rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        #display-name {
            font-size: 7rem;
            font-weight: 800;
            color: #fff;
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
            margin-bottom: 20px;
        }

        #draw-btn {
            font-size: 2.5rem;
            padding: 15px 70px;
            border-radius: 60px;
            border: none;
            background: linear-gradient(180deg, #FFD700 0%, #B8860B 100%);
            color: #4a0000;
            font-weight: 900;
            cursor: pointer;
            box-shadow: 0 10px 0 #8b6508, 0 15px 25px rgba(0,0,0,0.5);
            transition: 0.1s;
        }
        #draw-btn:active { transform: translateY(6px); box-shadow: 0 4px 0 #8b6508; }

        .history-panel {
            width: 300px;
            height: 500px;
            background: rgba(0,0,0,0.6);
            border: 1px solid #444;
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        .history-panel h3 { color: var(--gold); border-bottom: 2px solid var(--gold); padding-bottom: 10px; }
        #history-list { flex: 1; overflow-y: auto; list-style: none; padding: 0; margin: 0; text-align: left;}
        #history-list li { padding: 10px; border-bottom: 1px solid #333; font-size: 1.2rem; animation: fadeIn 0.5s; }

        .mode-selector { margin-bottom: 30px; display: flex; gap: 15px; }
        .mode-btn { padding: 10px 25px; border-radius: 5px; border: 1px solid var(--gold); background: transparent; color: var(--gold); cursor: pointer; }
        .mode-btn.active { background: var(--gold); color: #000; }
        #btn-grand { display: none; border-color: #ff00cc; color: #ff00cc; }

        #admin-modal {
            display: none;
            position: fixed;
            top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: #222; border: 2px solid var(--gold); padding: 20px; border-radius: 10px; z-index: 100;
            width: 400px;
        }
        textarea { width: 100%; height: 120px; margin-top: 10px; }

        @keyframes fadeIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
    </style>
</head>
<body>

    <audio id="audio-roll" src="roll.mp3" loop></audio>
    <audio id="audio-win" src="win.mp3"></audio>

    <div class="header">
        <h1>LUCKY DRAW å°¾ç‰™æ…¶å…¸</h1>
    </div>

    <div class="main-container">
        <div class="lottery-box">
            <div id="prize-label">ä¸€èˆ¬ç</div>
            <div id="display-name">READY</div>
            <button id="draw-btn" onclick="handleDraw()">é–‹å§‹æŠ½ç</button>
        </div>

        <div class="history-panel">
            <h3>ğŸ† æ¦®è€€æ¦œ</h3>
            <ul id="history-list"></ul>
        </div>
    </div>

    <div class="mode-selector">
        <button class="mode-btn active" onclick="setMode('normal', this)">ä¸€èˆ¬ç</button>
        <button class="mode-btn" onclick="setMode('bonus', this)">ç¾å ´åŠ ç¢¼ç</button>
        <button id="btn-grand" class="mode-btn" onclick="setMode('grand', this)">ğŸ‘‘ çµ‚æ¥µé ­ç</button>
    </div>

    <div style="color: #444; font-size: 0.8rem; margin-bottom: 10px;">æŒ‰ä¸‹éµç›¤ M é–‹å•Ÿè¨­å®š | S é–‹å•Ÿé ­ç</div>

    <div id="admin-modal">
        <h3>âš™ï¸ å¾Œå°åå–®ç®¡ç†</h3>
        <label>åƒåŠ äººå“¡åå–® (æ¯è¡Œä¸€äºº)ï¼š</label>
        <textarea id="list-all">æ—ç¶ºæ…§&#10;é™³éŸ‹ä¼¶&#10;æ—ç´«ç‘©&#10;è¢å®‡ç‘„&#10;é»ƒéƒç¶¾&#10;æè²ç’‡&#10;æ›¾é›ªå€©&#10;éƒ­å®‡ä»&#10;å¼µè© çµœ&#10;é™³å©·&#10;æåœ‹é½Š&#10;èŠæ˜æ˜¥&#10;é»ƒé¾æœˆ&#10;ç‹ç›ˆæƒ &#10;é™³ä¿é›¯&#10;æ¸¸ç­±æŸ”&#10;è³ˆç¶­å€«&#10;ç‹ä¿¡å‰&#10;æ–½è“‰å¹¸&#10;é»ƒåƒå‡¡&#10;æ—ç´”å¦‚&#10;å³æ˜‡é”&#10;æ—èŠŠå¦¤&#10;é™³å¨éœ–&#10;æ›¾éˆºå©·&#10;æå­Ÿæ¨º&#10;æå©‰ç‘›&#10;é™³æƒ ç´&#10;é™³æ›‰ä½©&#10;ç‹è€æŸ”

</textarea>
        <br><br>
        <label>æ’é™¤å¤§çåå–® (é€™å¹¾äººä¸èƒ½æŠ½åŠ ç¢¼/é ­ç)ï¼š</label>
        <textarea id="list-exclude">é™³å¨éœ–&#10;æ›¾éˆºå©·&#10;æ—èŠŠå¦¤</textarea>
        <br><br>
        <button onclick="document.getElementById('admin-modal').style.display='none'" style="width:100%; padding:10px;">é—œé–‰ä¸¦å„²å­˜</button>
    </div>

    <script>
        let currentMode = 'normal';
        let isRolling = false;
        let timer = null;
        let winners = [];

        // éŸ³æ•ˆç‰©ä»¶
        const audioRoll = document.getElementById('audio-roll');
        const audioWin = document.getElementById('audio-win');

        function setMode(mode, btn) {
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById('prize-label').innerText = btn.innerText;
            document.getElementById('display-name').innerText = "READY";
        }

        function handleDraw() {
            const btn = document.getElementById('draw-btn');
            const display = document.getElementById('display-name');
            
            const all = document.getElementById('list-all').value.split('\n').map(n => n.trim()).filter(n => n);
            const exclude = document.getElementById('list-exclude').value.split('\n').map(n => n.trim()).filter(n => n);
            
            let pool = all.filter(n => !winners.includes(n));
            if (currentMode === 'bonus' || currentMode === 'grand') {
                pool = pool.filter(n => !exclude.includes(n));
            }

            if (!isRolling) {
                if (pool.length === 0) { alert("åå–®å·²æŠ½å®Œæˆ–ç„¡ç¬¦åˆè³‡æ ¼è€…ï¼"); return; }
                
                isRolling = true;
                btn.innerText = "STOP";
                
                // æ’­æ”¾é¼“è² (å¾ªç’°æ’­æ”¾)
                audioRoll.currentTime = 0;
                audioRoll.play().catch(e => console.log("éœ€é»æ“Šé é¢ä»¥æ’­æ”¾éŸ³æ•ˆ"));
                
                timer = setInterval(() => {
                    display.innerText = pool[Math.floor(Math.random() * pool.length)];
                }, 60);
            } else {
                clearInterval(timer);
                isRolling = false;

                // åœæ­¢é¼“è²ï¼Œæ’­æ”¾ä¸­çè²
                audioRoll.pause();
                audioWin.currentTime = 0;
                audioWin.play();

                const winner = pool[Math.floor(Math.random() * pool.length)];
                display.innerText = winner;
                winners.push(winner);
                
                const li = document.createElement('li');
                li.innerHTML = `<span style="color:var(--gold)">â—</span> ${winner} <small>(${document.getElementById('prize-label').innerText})</small>`;
                document.getElementById('history-list').prepend(li);
                
                btn.innerText = "NEXT";
            }
        }

        document.addEventListener('keydown', (e) => {
            if (e.key.toLowerCase() === 'm') {
                const modal = document.getElementById('admin-modal');
                modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
            }
            if (e.key.toLowerCase() === 's') {
                const gb = document.getElementById('btn-grand');
                gb.style.display = gb.style.display === 'block' ? 'none' : 'block';
            }
        });
    </script>
</body>
</html>